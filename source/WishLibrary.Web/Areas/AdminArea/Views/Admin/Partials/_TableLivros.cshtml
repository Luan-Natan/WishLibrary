@using WishLibrary.Core.Enums;
@model PaginacaoRequestDto
@{
}

<form class="" asp-area="AdminArea" asp-controller="Livro" asp-action="ObterLivros" method="get">
    <div class="my-3">
        <label for="TamPag">Tamanho Página</label>
        <input class="form-control" type="number" asp-for="@Model.TamanhoPagina" required>
    </div>

    <div class="my-3">
        <button class="btn btn-success" type="submit">Enviar</button>
    </div>
</form>

@{
    if (ViewBag.LivroList.Response is not null)
    {
        <table class="table" id="tabela">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Nome</th>
                    <th scope="col">Gênero</th>
                    <th scope="col">Data de lançamento</th>
                </tr>
            </thead>
            <tbody id="listarLivros">
                @foreach (var item in ViewBag.LivroList.Response)
                {
                    <tr>
                        <th scope="row">@item.IdLivro</th>
                        <td>@item.NomeLivro</td>
                        <td>@item.NomeGenero</td>
                        <td>@item.DataLancamento.ToString("dd/MM/yyyy")</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p><b>Sem itens para mostrar!</b></p>
    }
}

<nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">

        <li class="page-item">
            @{
                Model.PaginaAtual = ViewBag.LivroList.PaginaAnterior;
                @Html.ActionLink("Anterior", "ObterLivros", "Livro", Model, new { @class = "page-link" })
                ;
            }
        </li>

        @{
            for (int i = 1; i <= ViewBag.LivroList.NumeroPaginas; i++)
            {
                Model.PaginaAtual = i;
                <li class="page-item"> @Html.ActionLink(i.ToString(),"ObterLivros","Livro", Model, new { @class = "page-link"}) </li>
            }
        }

        <li class="page-item">
            @{
                Model.PaginaAtual = ViewBag.LivroList.ProximaPagina;
                @Html.ActionLink("Próximo", "ObterLivros", "Livro", Model, new { @class = "page-link" })
                ;
            }
        </li>
    </ul>
</nav>